/*
Copyright 2022 Upbound Inc.
*/

// Code generated by upjet. DO NOT EDIT.

package v1alpha1

import (
	metav1 "k8s.io/apimachinery/pkg/apis/meta/v1"
	"k8s.io/apimachinery/pkg/runtime/schema"

	v1 "github.com/crossplane/crossplane-runtime/apis/common/v1"
)

type ConfigurationObservation struct {

	// Unique identifier for the alert configuration.
	AlertConfigurationID *string `json:"alertConfigurationId,omitempty" tf:"alert_configuration_id,omitempty"`

	// Timestamp in ISO 8601 date and time format in UTC when this alert configuration was created.
	Created *string `json:"created,omitempty" tf:"created,omitempty"`

	// It is not required, but If the attribute is omitted, by default will be false, and the configuration would be disabled. You must set true to enable the configuration.
	Enabled *bool `json:"enabled,omitempty" tf:"enabled,omitempty"`

	// The type of event that will trigger an alert.
	EventType *string `json:"eventType,omitempty" tf:"event_type,omitempty"`

	ID *string `json:"id,omitempty" tf:"id,omitempty"`

	Matcher []MatcherObservation `json:"matcher,omitempty" tf:"matcher,omitempty"`

	// Threshold value outside of which an alert will be triggered.
	MetricThreshold map[string]*string `json:"metricThreshold,omitempty" tf:"metric_threshold,omitempty"`

	MetricThresholdConfig []MetricThresholdConfigObservation `json:"metricThresholdConfig,omitempty" tf:"metric_threshold_config,omitempty"`

	Notification []NotificationObservation `json:"notification,omitempty" tf:"notification,omitempty"`

	// The ID of the project where the alert configuration will create.
	ProjectID *string `json:"projectId,omitempty" tf:"project_id,omitempty"`

	// Threshold value outside of which an alert will be triggered.
	Threshold map[string]*string `json:"threshold,omitempty" tf:"threshold,omitempty"`

	ThresholdConfig []ThresholdConfigObservation `json:"thresholdConfig,omitempty" tf:"threshold_config,omitempty"`

	// Timestamp in ISO 8601 date and time format in UTC when this alert configuration was last updated.
	Updated *string `json:"updated,omitempty" tf:"updated,omitempty"`
}

type ConfigurationParameters struct {

	// It is not required, but If the attribute is omitted, by default will be false, and the configuration would be disabled. You must set true to enable the configuration.
	// +kubebuilder:validation:Optional
	Enabled *bool `json:"enabled,omitempty" tf:"enabled,omitempty"`

	// The type of event that will trigger an alert.
	// +kubebuilder:validation:Optional
	EventType *string `json:"eventType,omitempty" tf:"event_type,omitempty"`

	// +kubebuilder:validation:Optional
	Matcher []MatcherParameters `json:"matcher,omitempty" tf:"matcher,omitempty"`

	// Threshold value outside of which an alert will be triggered.
	// +kubebuilder:validation:Optional
	MetricThreshold map[string]*string `json:"metricThreshold,omitempty" tf:"metric_threshold,omitempty"`

	// +kubebuilder:validation:Optional
	MetricThresholdConfig []MetricThresholdConfigParameters `json:"metricThresholdConfig,omitempty" tf:"metric_threshold_config,omitempty"`

	// +kubebuilder:validation:Optional
	Notification []NotificationParameters `json:"notification,omitempty" tf:"notification,omitempty"`

	// The ID of the project where the alert configuration will create.
	// +kubebuilder:validation:Optional
	ProjectID *string `json:"projectId,omitempty" tf:"project_id,omitempty"`

	// Threshold value outside of which an alert will be triggered.
	// +kubebuilder:validation:Optional
	Threshold map[string]*string `json:"threshold,omitempty" tf:"threshold,omitempty"`

	// +kubebuilder:validation:Optional
	ThresholdConfig []ThresholdConfigParameters `json:"thresholdConfig,omitempty" tf:"threshold_config,omitempty"`
}

type MatcherObservation struct {

	// Name of the field in the target object to match on.
	FieldName *string `json:"fieldName,omitempty" tf:"field_name,omitempty"`

	// If omitted, the configuration is disabled.
	Operator *string `json:"operator,omitempty" tf:"operator,omitempty"`

	// If omitted, the configuration is disabled.
	Value *string `json:"value,omitempty" tf:"value,omitempty"`
}

type MatcherParameters struct {

	// Name of the field in the target object to match on.
	// +kubebuilder:validation:Optional
	FieldName *string `json:"fieldName,omitempty" tf:"field_name,omitempty"`

	// If omitted, the configuration is disabled.
	// +kubebuilder:validation:Optional
	Operator *string `json:"operator,omitempty" tf:"operator,omitempty"`

	// If omitted, the configuration is disabled.
	// +kubebuilder:validation:Optional
	Value *string `json:"value,omitempty" tf:"value,omitempty"`
}

type MetricThresholdConfigObservation struct {

	// Name of the metric to check. The full list being quite large, please refer to atlas docs here for general metrics and here for serverless metrics
	MetricName *string `json:"metricName,omitempty" tf:"metric_name,omitempty"`

	// This must be set to AVERAGE. Atlas computes the current metric value as an average.
	Mode *string `json:"mode,omitempty" tf:"mode,omitempty"`

	// If omitted, the configuration is disabled.
	Operator *string `json:"operator,omitempty" tf:"operator,omitempty"`

	// Threshold value outside of which an alert will be triggered.
	Threshold *float64 `json:"threshold,omitempty" tf:"threshold,omitempty"`

	// The units for the threshold value. Depends on the type of metric.
	// Refer to the MongoDB API Alert Configuration documentation for a list of accepted values.
	Units *string `json:"units,omitempty" tf:"units,omitempty"`
}

type MetricThresholdConfigParameters struct {

	// Name of the metric to check. The full list being quite large, please refer to atlas docs here for general metrics and here for serverless metrics
	// +kubebuilder:validation:Optional
	MetricName *string `json:"metricName,omitempty" tf:"metric_name,omitempty"`

	// This must be set to AVERAGE. Atlas computes the current metric value as an average.
	// +kubebuilder:validation:Optional
	Mode *string `json:"mode,omitempty" tf:"mode,omitempty"`

	// If omitted, the configuration is disabled.
	// +kubebuilder:validation:Optional
	Operator *string `json:"operator,omitempty" tf:"operator,omitempty"`

	// Threshold value outside of which an alert will be triggered.
	// +kubebuilder:validation:Optional
	Threshold *float64 `json:"threshold,omitempty" tf:"threshold,omitempty"`

	// The units for the threshold value. Depends on the type of metric.
	// Refer to the MongoDB API Alert Configuration documentation for a list of accepted values.
	// +kubebuilder:validation:Optional
	Units *string `json:"units,omitempty" tf:"units,omitempty"`
}

type NotificationObservation struct {

	// Slack channel name. Required for the SLACK notifications type.
	ChannelName *string `json:"channelName,omitempty" tf:"channel_name,omitempty"`

	// Region that indicates which API URL to use. Accepted regions are: US, EU. The default Datadog region is US.
	DatadogRegion *string `json:"datadogRegion,omitempty" tf:"datadog_region,omitempty"`

	// Number of minutes to wait after an alert condition is detected before sending out the first notification.
	DelayMin *float64 `json:"delayMin,omitempty" tf:"delay_min,omitempty"`

	// Email address to which alert notifications are sent. Required for the EMAIL notifications type.
	EmailAddress *string `json:"emailAddress,omitempty" tf:"email_address,omitempty"`

	// Flag indicating email notifications should be sent. This flag is only valid if type_name is set to ORG, GROUP, or USER.
	EmailEnabled *bool `json:"emailEnabled,omitempty" tf:"email_enabled,omitempty"`

	// Number of minutes to wait between successive notifications for unacknowledged alerts that are not resolved. The minimum value is 5. NOTE PAGER_DUTY, VICTOR_OPS, and OPS_GENIE notifications do not return this value. The notification interval must be configured and managed within each external service.
	IntervalMin *float64 `json:"intervalMin,omitempty" tf:"interval_min,omitempty"`

	// Mobile number to which alert notifications are sent. Required for the SMS notifications type.
	MobileNumber *string `json:"mobileNumber,omitempty" tf:"mobile_number,omitempty"`

	// Region that indicates which API URL to use. Accepted regions are: US ,EU. The default Opsgenie region is US.
	OpsGenieRegion *string `json:"opsGenieRegion,omitempty" tf:"ops_genie_region,omitempty"`

	// Optional. One or more roles that receive the configured alert. If you include this field, Atlas sends alerts only to users assigned the roles you specify in the array. If you omit this field, Atlas sends alerts to users assigned any role. This parameter is only valid if type_name is set to ORG, GROUP, or USER.
	// Accepted values are:
	Roles []*string `json:"roles,omitempty" tf:"roles,omitempty"`

	// Flag indicating if text message notifications should be sent to this user's mobile phone. This flag is only valid if type_name is set to ORG, GROUP, or USER.
	SMSEnabled *bool `json:"smsEnabled,omitempty" tf:"sms_enabled,omitempty"`

	// Unique identifier of a team.
	TeamID *string `json:"teamId,omitempty" tf:"team_id,omitempty"`

	// Label for the team that receives this notification.
	TeamName *string `json:"teamName,omitempty" tf:"team_name,omitempty"`

	// Type of alert notification.
	// Accepted values are:
	TypeName *string `json:"typeName,omitempty" tf:"type_name,omitempty"`

	// Name of the Atlas user to which to send notifications. Only a user in the project that owns the alert configuration is allowed here. Required for the USER notifications type.
	Username *string `json:"username,omitempty" tf:"username,omitempty"`
}

type NotificationParameters struct {

	// Slack API token. Required for the SLACK notifications type. If the token later becomes invalid, Atlas sends an email to the project owner and eventually removes the token.
	// +kubebuilder:validation:Optional
	APITokenSecretRef *v1.SecretKeySelector `json:"apiTokenSecretRef,omitempty" tf:"-"`

	// Slack channel name. Required for the SLACK notifications type.
	// +kubebuilder:validation:Optional
	ChannelName *string `json:"channelName,omitempty" tf:"channel_name,omitempty"`

	// Datadog API Key. Found in the Datadog dashboard. Required for the DATADOG notifications type.
	// +kubebuilder:validation:Optional
	DatadogAPIKeySecretRef *v1.SecretKeySelector `json:"datadogApiKeySecretRef,omitempty" tf:"-"`

	// Region that indicates which API URL to use. Accepted regions are: US, EU. The default Datadog region is US.
	// +kubebuilder:validation:Optional
	DatadogRegion *string `json:"datadogRegion,omitempty" tf:"datadog_region,omitempty"`

	// Number of minutes to wait after an alert condition is detected before sending out the first notification.
	// +kubebuilder:validation:Optional
	DelayMin *float64 `json:"delayMin,omitempty" tf:"delay_min,omitempty"`

	// Email address to which alert notifications are sent. Required for the EMAIL notifications type.
	// +kubebuilder:validation:Optional
	EmailAddress *string `json:"emailAddress,omitempty" tf:"email_address,omitempty"`

	// Flag indicating email notifications should be sent. This flag is only valid if type_name is set to ORG, GROUP, or USER.
	// +kubebuilder:validation:Optional
	EmailEnabled *bool `json:"emailEnabled,omitempty" tf:"email_enabled,omitempty"`

	// Number of minutes to wait between successive notifications for unacknowledged alerts that are not resolved. The minimum value is 5. NOTE PAGER_DUTY, VICTOR_OPS, and OPS_GENIE notifications do not return this value. The notification interval must be configured and managed within each external service.
	// +kubebuilder:validation:Optional
	IntervalMin *float64 `json:"intervalMin,omitempty" tf:"interval_min,omitempty"`

	// Microsoft Teams Webhook Uniform Resource Locator (URL) that MongoDB Cloud needs to send this notification via Microsoft Teams. Required if type_name is MICROSOFT_TEAMS. If the URL later becomes invalid, MongoDB Cloud sends an email to the project owners. If the key remains invalid, MongoDB Cloud removes it.
	// +kubebuilder:validation:Optional
	MicrosoftTeamsWebhookURLSecretRef *v1.SecretKeySelector `json:"microsoftTeamsWebhookUrlSecretRef,omitempty" tf:"-"`

	// Mobile number to which alert notifications are sent. Required for the SMS notifications type.
	// +kubebuilder:validation:Optional
	MobileNumber *string `json:"mobileNumber,omitempty" tf:"mobile_number,omitempty"`

	// Opsgenie API Key. Required for the OPS_GENIE notifications type. If the key later becomes invalid, Atlas sends an email to the project owner and eventually removes the token.
	// +kubebuilder:validation:Optional
	OpsGenieAPIKeySecretRef *v1.SecretKeySelector `json:"opsGenieApiKeySecretRef,omitempty" tf:"-"`

	// Region that indicates which API URL to use. Accepted regions are: US ,EU. The default Opsgenie region is US.
	// +kubebuilder:validation:Optional
	OpsGenieRegion *string `json:"opsGenieRegion,omitempty" tf:"ops_genie_region,omitempty"`

	// Optional. One or more roles that receive the configured alert. If you include this field, Atlas sends alerts only to users assigned the roles you specify in the array. If you omit this field, Atlas sends alerts to users assigned any role. This parameter is only valid if type_name is set to ORG, GROUP, or USER.
	// Accepted values are:
	// +kubebuilder:validation:Optional
	Roles []*string `json:"roles,omitempty" tf:"roles,omitempty"`

	// Flag indicating if text message notifications should be sent to this user's mobile phone. This flag is only valid if type_name is set to ORG, GROUP, or USER.
	// +kubebuilder:validation:Optional
	SMSEnabled *bool `json:"smsEnabled,omitempty" tf:"sms_enabled,omitempty"`

	// PagerDuty service key. Required for the PAGER_DUTY notifications type. If the key later becomes invalid, Atlas sends an email to the project owner and eventually removes the key.
	// +kubebuilder:validation:Optional
	ServiceKeySecretRef *v1.SecretKeySelector `json:"serviceKeySecretRef,omitempty" tf:"-"`

	// Unique identifier of a team.
	// +kubebuilder:validation:Optional
	TeamID *string `json:"teamId,omitempty" tf:"team_id,omitempty"`

	// Type of alert notification.
	// Accepted values are:
	// +kubebuilder:validation:Optional
	TypeName *string `json:"typeName,omitempty" tf:"type_name,omitempty"`

	// Name of the Atlas user to which to send notifications. Only a user in the project that owns the alert configuration is allowed here. Required for the USER notifications type.
	// +kubebuilder:validation:Optional
	Username *string `json:"username,omitempty" tf:"username,omitempty"`

	// VictorOps API key. Required for the VICTOR_OPS notifications type. If the key later becomes invalid, Atlas sends an email to the project owner and eventually removes the key.
	// +kubebuilder:validation:Optional
	VictorOpsAPIKeySecretRef *v1.SecretKeySelector `json:"victorOpsApiKeySecretRef,omitempty" tf:"-"`

	// VictorOps routing key. Optional for the VICTOR_OPS notifications type. If the key later becomes invalid, Atlas sends an email to the project owner and eventually removes the key.
	// +kubebuilder:validation:Optional
	VictorOpsRoutingKeySecretRef *v1.SecretKeySelector `json:"victorOpsRoutingKeySecretRef,omitempty" tf:"-"`

	// Optional authentication secret for the WEBHOOK notifications type.
	// +kubebuilder:validation:Optional
	WebhookSecretSecretRef *v1.SecretKeySelector `json:"webhookSecretSecretRef,omitempty" tf:"-"`

	// Target URL  for the WEBHOOK notifications type.
	// +kubebuilder:validation:Optional
	WebhookURLSecretRef *v1.SecretKeySelector `json:"webhookUrlSecretRef,omitempty" tf:"-"`
}

type ThresholdConfigObservation struct {

	// If omitted, the configuration is disabled.
	Operator *string `json:"operator,omitempty" tf:"operator,omitempty"`

	// Threshold value outside of which an alert will be triggered.
	Threshold *float64 `json:"threshold,omitempty" tf:"threshold,omitempty"`

	// The units for the threshold value. Depends on the type of metric.
	// Refer to the MongoDB API Alert Configuration documentation for a list of accepted values.
	Units *string `json:"units,omitempty" tf:"units,omitempty"`
}

type ThresholdConfigParameters struct {

	// If omitted, the configuration is disabled.
	// +kubebuilder:validation:Optional
	Operator *string `json:"operator,omitempty" tf:"operator,omitempty"`

	// Threshold value outside of which an alert will be triggered.
	// +kubebuilder:validation:Optional
	Threshold *float64 `json:"threshold,omitempty" tf:"threshold,omitempty"`

	// The units for the threshold value. Depends on the type of metric.
	// Refer to the MongoDB API Alert Configuration documentation for a list of accepted values.
	// +kubebuilder:validation:Optional
	Units *string `json:"units,omitempty" tf:"units,omitempty"`
}

// ConfigurationSpec defines the desired state of Configuration
type ConfigurationSpec struct {
	v1.ResourceSpec `json:",inline"`
	ForProvider     ConfigurationParameters `json:"forProvider"`
}

// ConfigurationStatus defines the observed state of Configuration.
type ConfigurationStatus struct {
	v1.ResourceStatus `json:",inline"`
	AtProvider        ConfigurationObservation `json:"atProvider,omitempty"`
}

// +kubebuilder:object:root=true

// Configuration is the Schema for the Configurations API. Provides an Alert Configuration resource.
// +kubebuilder:printcolumn:name="READY",type="string",JSONPath=".status.conditions[?(@.type=='Ready')].status"
// +kubebuilder:printcolumn:name="SYNCED",type="string",JSONPath=".status.conditions[?(@.type=='Synced')].status"
// +kubebuilder:printcolumn:name="EXTERNAL-NAME",type="string",JSONPath=".metadata.annotations.crossplane\\.io/external-name"
// +kubebuilder:printcolumn:name="AGE",type="date",JSONPath=".metadata.creationTimestamp"
// +kubebuilder:subresource:status
// +kubebuilder:resource:scope=Cluster,categories={crossplane,managed,mongodbatlas}
type Configuration struct {
	metav1.TypeMeta   `json:",inline"`
	metav1.ObjectMeta `json:"metadata,omitempty"`
	// +kubebuilder:validation:XValidation:rule="self.managementPolicy == 'ObserveOnly' || has(self.forProvider.eventType)",message="eventType is a required parameter"
	// +kubebuilder:validation:XValidation:rule="self.managementPolicy == 'ObserveOnly' || has(self.forProvider.notification)",message="notification is a required parameter"
	// +kubebuilder:validation:XValidation:rule="self.managementPolicy == 'ObserveOnly' || has(self.forProvider.projectId)",message="projectId is a required parameter"
	Spec   ConfigurationSpec   `json:"spec"`
	Status ConfigurationStatus `json:"status,omitempty"`
}

// +kubebuilder:object:root=true

// ConfigurationList contains a list of Configurations
type ConfigurationList struct {
	metav1.TypeMeta `json:",inline"`
	metav1.ListMeta `json:"metadata,omitempty"`
	Items           []Configuration `json:"items"`
}

// Repository type metadata.
var (
	Configuration_Kind             = "Configuration"
	Configuration_GroupKind        = schema.GroupKind{Group: CRDGroup, Kind: Configuration_Kind}.String()
	Configuration_KindAPIVersion   = Configuration_Kind + "." + CRDGroupVersion.String()
	Configuration_GroupVersionKind = CRDGroupVersion.WithKind(Configuration_Kind)
)

func init() {
	SchemeBuilder.Register(&Configuration{}, &ConfigurationList{})
}
